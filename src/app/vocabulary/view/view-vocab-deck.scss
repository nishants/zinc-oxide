$exposure_container_height: 150px;
$exposure_size: 30px;
$exposure_current_size: 45px;
$max_exposure_count: 6;
$connector_thickness: 2px;
$marker_width: 250px;
$marker_height: 50px;

$marker_speak_size: 15px;

$current_exposure_bottom: $exposure_current_size/2 + $exposure_size/2 - $padding/2;
.vocabset.card{
  .deck{
    position: relative;
    border-top: $very_light_border;
    padding: 2*$padding $padding;
    .words{}
    ul.exposures{
      @extend .undo-list;
      @extend .resize-container;
      width: 100%;
      position: relative;
      z-index: 2;
      > li {
        float: left;
        width: calc(100%/#{$max_exposure_count});
        .exposure{
          width     : 100%;
          padding   : 0px $padding;
          height    : $exposure_container_height;
          position  : relative;
          .marker{
            position    : absolute;
            top         : $padding*1.5;
            left        : -$padding;
            height      : $marker_height;
            line-height : $marker_height;
            width       : $marker_width;
            border-radius: $message_border_radius;
            text-align: center;

          }
          .marker.bonus{
            background-color: $vocab_exposure_highlight_state_bg;
          }
          .marker.waiting{
            background-color: $vocab_exposure_connector_color;
          }
          .speak{
            position: absolute;
            bottom: $padding + $exposure_current_size + $marker_speak_size;
            left: $exposure_current_size/2;
          }
          .speak.waiting{
            @include speak-bottom($marker_speak_size, $marker_speak_size, $vocab_exposure_connector_color);
          }
          .speak.bonus{
            @include speak-bottom($marker_speak_size, $marker_speak_size, $vocab_exposure_highlight_state_bg);
          }
          .state{
            position      : absolute;
            margin        : auto;
            border-radius : 50%;
            overflow      : hidden;
            text-align    : center;
            background-color: $vocab_exposure_state_bg;
          }
          .state:not(.current){
            width       : $exposure_size;
            height      : $exposure_size;
            line-height : $exposure_size;
            bottom      : $exposure_current_size/2 + $exposure_size/2 - $padding/2;
          }
          .state.current{
            width       : $exposure_current_size;
            height      : $exposure_current_size;
            line-height : $exposure_current_size;
            bottom      : $exposure_current_size/2;
            border      : $very_light_border;

            max-width   : calc(100% - #{$padding}/2);
            margin      : auto;
          }
          .state.playable{
            cursor: pointer;
            box-shadow: $button_shadow;
            background-color: $vocab_exposure_highlight_state_bg;
            @include transition($transition);
          }
          .state.playable:hover{
            box-shadow: $card_elevated_shadow;
          }
          .state.completed{
            color : $vocab_exposure_completed_color;
          }
          .state.waiting{
            cursor : not-allowed;
          }
        }
      }
    }
    ul.exposures > li:nth-child(1) > .exposure{
      .marker{
        left: 0px;
      }
    }
    ul.exposures > li:nth-child(#{$max_exposure_count}) > .exposure{
      .marker{
        left: calc(100% - #{$marker_width});
      }
    }
    ul.exposures > li:nth-child(#{$max_exposure_count - 1}) > .exposure{
      .marker{
        left: calc(100% - #{$marker_width} + 100%/#{$max_exposure_count});
      }
    }
    ul.exposures > li:nth-child(#{$max_exposure_count - 2}) > .exposure{
      .marker{
        left: -50%;
      }
    }

    .connector{
      position: absolute;
      bottom  : $exposure_current_size + $padding*2;
      left    : $padding*2;
      width: calc(100% - #{$padding}*2 - 100%/#{$max_exposure_count} + #{$exposure_size/2});
      height: $connector_thickness;
      background-color: $vocab_exposure_connector_color;
    }
  }
}